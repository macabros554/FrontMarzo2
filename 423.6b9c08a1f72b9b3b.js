"use strict";(self.webpackChunkmacabrosMasterRaceFront=self.webpackChunkmacabrosMasterRaceFront||[]).push([[423],{8662:(f,m,r)=>{r.r(m),r.d(m,{DatosUsuarioModule:()=>I});var u=r(6019),g=r(2979),p=r(1659),l=r.n(p),o=r(3556),Z=r(5515),s=r(4206);let c=(()=>{class t{constructor(e){this.serviceUsuario=e,this.eventoHijo=new o.vpe,this.pedidos=[]}ngOnInit(){}enviarPadre(){this.eventoHijo.emit(this.ultimoPedido)}sacarPedidos(){this.serviceUsuario.buscarPedidos().subscribe({next:e=>{this.pedidos=e,this.sacarOrdenadores()},error:e=>{l().fire("No tiene pedidos",e.error.mensaje)}})}sacarOrdenadores(){let e=0;this.pedidos.forEach(n=>{this.serviceUsuario.buscarOrdenador(n.id).subscribe({next:d=>{this.pedidos[e].ordenador=d,e++,e==this.pedidos.length&&(this.ultimoPedido=this.pedidos[e-1],this.enviarPadre())},error:d=>{l().fire("No tiene ordenadores asociados a un pedido",d.error.mensaje)}})})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Z.i))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-hijo"]],outputs:{eventoHijo:"eventoHijo"},decls:2,vars:0,consts:[["type","button","value","Ver ultimo pedido",1,"btn","btn-secondary",3,"click"]],template:function(e,n){1&e&&(o._UZ(0,"br"),o.TgZ(1,"input",0),o.NdJ("click",function(){return n.sacarPedidos()}),o.qZA())},styles:[""]}),t})();function a(t,i){1&t&&o._UZ(0,"app-loading",2),2&t&&o.Q6J("texto","Usuario")}function h(t,i){if(1&t&&(o.TgZ(0,"div"),o.TgZ(1,"h2"),o._uU(2),o.qZA(),o.TgZ(3,"h2"),o._uU(4),o.qZA(),o.TgZ(5,"h2"),o._uU(6),o.qZA(),o.TgZ(7,"h2"),o._uU(8),o.qZA(),o.qZA()),2&t){const e=o.oxw(2);o.xp6(2),o.hij("Tipo de pago: ",e.usuario.tipopado,""),o.xp6(2),o.hij("Codigo de tarjeta: ",e.usuario.codigotarjeta,""),o.xp6(2),o.hij("Tarjeta: ",e.usuario.tarjeta,""),o.xp6(2),o.hij("Due\xf1o tarjeta: ",e.usuario.dueniotarjeta,"")}}function U(t,i){if(1&t){const e=o.EpF();o.TgZ(0,"a",13),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).mostrarTipoPago()}),o._uU(1,"Mostrar pago predeterminado"),o.qZA()}}function T(t,i){if(1&t){const e=o.EpF();o.TgZ(0,"a",13),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).ocultarTipoPago()}),o._uU(1,"Ocultar pago predeterminado"),o.qZA()}}function v(t,i){if(1&t&&(o.TgZ(0,"div",14),o._UZ(1,"p"),o.TgZ(2,"div",15),o._UZ(3,"img",16),o.qZA(),o.TgZ(4,"div",17),o.TgZ(5,"h1",18),o._uU(6),o.qZA(),o.TgZ(7,"p",19),o._uU(8),o.qZA(),o.TgZ(9,"p",19),o.TgZ(10,"b"),o._uU(11,"Caracteristicas:"),o.qZA(),o.qZA(),o.TgZ(12,"p",19),o.TgZ(13,"b"),o._uU(14,"Procesador:"),o.qZA(),o._uU(15),o.qZA(),o.TgZ(16,"p",19),o.TgZ(17,"b"),o._uU(18,"Disco duro:"),o.qZA(),o._uU(19),o.qZA(),o.TgZ(20,"p",19),o.TgZ(21,"b"),o._uU(22,"Fuente:"),o.qZA(),o._uU(23),o.qZA(),o.TgZ(24,"p",19),o.TgZ(25,"b"),o._uU(26,"Grafica:"),o.qZA(),o._uU(27),o.qZA(),o.TgZ(28,"p",19),o.TgZ(29,"b"),o._uU(30,"Ram:"),o.qZA(),o._uU(31),o.qZA(),o.TgZ(32,"p",19),o.TgZ(33,"b"),o._uU(34,"Precio:"),o.qZA(),o._uU(35),o.qZA(),o.TgZ(36,"p",19),o.TgZ(37,"b"),o._uU(38,"Fecha compra:"),o.qZA(),o._uU(39),o.qZA(),o.TgZ(40,"p",19),o.TgZ(41,"b"),o._uU(42,"Direccion envio:"),o.qZA(),o._uU(43),o.qZA(),o.TgZ(44,"p",19),o.TgZ(45,"b"),o._uU(46,"Telefono:"),o.qZA(),o._uU(47),o.qZA(),o.qZA(),o.qZA()),2&t){const e=o.oxw(2);o.xp6(3),o.s9C("src",e.mensajeHijo.ordenador.imagenes,o.LSH),o.xp6(3),o.Oqu(e.mensajeHijo.ordenador.nombre),o.xp6(2),o.Oqu(e.mensajeHijo.ordenador.descripcionDetallada),o.xp6(7),o.hij(" ",e.mensajeHijo.ordenador.procesador.nombre,""),o.xp6(4),o.AsE(" ",e.mensajeHijo.ordenador.discoduro.nombre," ",e.mensajeHijo.ordenador.discoduro.capacidad,""),o.xp6(4),o.AsE(": ",e.mensajeHijo.ordenador.fuente.nombre," ",e.mensajeHijo.ordenador.fuente.potencia,""),o.xp6(4),o.AsE(" ",e.mensajeHijo.ordenador.grafica.nombre," ",e.mensajeHijo.ordenador.grafica.modelo,""),o.xp6(4),o.AsE(" ",e.mensajeHijo.ordenador.ram.nombre," ",e.mensajeHijo.ordenador.ram.kit,"GB"),o.xp6(4),o.hij(" ",(e.mensajeHijo.ordenador.precio+e.mensajeHijo.ordenador.fuente.precio+e.mensajeHijo.ordenador.grafica.precio+e.mensajeHijo.ordenador.grafica.precio+e.mensajeHijo.ordenador.procesador.precio+e.mensajeHijo.ordenador.ram.precio).toFixed(2),"\u20ac"),o.xp6(4),o.hij(" ",e.mensajeHijo.fechaPack,""),o.xp6(4),o.hij(" ",e.mensajeHijo.direccion,""),o.xp6(4),o.hij(" ",e.mensajeHijo.telefono,"")}}function _(t,i){1&t&&(o.TgZ(0,"h2"),o._uU(1,"No has hecho ningun pedido aun"),o.qZA())}const A=function(){return["/paginasProtegidas/datosUsuario"]};function x(t,i){if(1&t){const e=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td",21),o._UZ(4,"img",22),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o.TgZ(10,"button",23),o.NdJ("click",function(){const j=o.CHM(e).$implicit;return o.oxw(3).borrarPedido(j.id)}),o._uU(11,"Borrar"),o.qZA(),o.qZA(),o.qZA()}if(2&t){const e=i.$implicit;o.xp6(2),o.Oqu(e.id),o.xp6(2),o.s9C("src",e.ordenador.imagenes,o.LSH),o.xp6(2),o.Oqu(e.ordenador.nombre),o.xp6(2),o.Oqu(e.ordenador.precio),o.xp6(2),o.Q6J("routerLink",o.DdM(5,A))}}function b(t,i){if(1&t&&(o.TgZ(0,"table"),o.TgZ(1,"tr"),o.TgZ(2,"th"),o._uU(3,"ID"),o.qZA(),o.TgZ(4,"th"),o._uU(5,"Imagen"),o.qZA(),o.TgZ(6,"th"),o._uU(7,"Nombre"),o.qZA(),o.TgZ(8,"th"),o._uU(9,"Precio"),o.qZA(),o.TgZ(10,"th"),o._uU(11,"Borrar"),o.qZA(),o.qZA(),o.YNc(12,x,12,6,"tr",20),o.qZA()),2&t){const e=o.oxw(2);o.xp6(12),o.Q6J("ngForOf",e.pedidos)}}const C=function(){return["/paginasProtegidas/datosUsuario/pedidos"]};function P(t,i){1&t&&(o.TgZ(0,"button",24),o._uU(1,"Mas informacion"),o.qZA()),2&t&&o.Q6J("routerLink",o.DdM(1,C))}function H(t,i){if(1&t){const e=o.EpF();o.TgZ(0,"div",3),o.TgZ(1,"div",4),o.TgZ(2,"div",5),o._uU(3," Tus datos "),o.qZA(),o._UZ(4,"br"),o.TgZ(5,"div",6),o.TgZ(6,"h2"),o._uU(7),o.qZA(),o.TgZ(8,"h2"),o._uU(9),o.qZA(),o.TgZ(10,"h2"),o._uU(11),o.qZA(),o.TgZ(12,"h2"),o._uU(13),o.qZA(),o.YNc(14,h,9,4,"div",7),o.YNc(15,U,2,0,"a",8),o.YNc(16,T,2,0,"a",8),o._UZ(17,"br"),o.TgZ(18,"app-hijo",9),o.NdJ("eventoHijo",function(d){return o.CHM(e),o.oxw().onMensajeHijo(d)}),o.qZA(),o.YNc(19,v,48,16,"div",10),o.qZA(),o.qZA(),o.TgZ(20,"div",4),o.TgZ(21,"div",11),o._uU(22," Pedidos "),o.qZA(),o._UZ(23,"br"),o.TgZ(24,"div",6),o.YNc(25,_,2,0,"h2",7),o.YNc(26,b,13,1,"table",7),o.qZA(),o._UZ(27,"br"),o.YNc(28,P,2,2,"button",12),o.qZA(),o.qZA()}if(2&t){const e=o.oxw();o.xp6(7),o.hij("Nombre: ",e.usuario.name,""),o.xp6(2),o.hij("Email: ",e.usuario.email,""),o.xp6(2),o.hij("Telefono: ",e.usuario.telefono,""),o.xp6(2),o.hij("Calle: ",e.usuario.calle,""),o.xp6(1),o.Q6J("ngIf",e.pago),o.xp6(1),o.Q6J("ngIf",!e.pago),o.xp6(1),o.Q6J("ngIf",e.pago),o.xp6(3),o.Q6J("ngIf",e.outprint),o.xp6(6),o.Q6J("ngIf",!e.pedidoEspera),o.xp6(1),o.Q6J("ngIf",e.pedidoEspera),o.xp6(2),o.Q6J("ngIf",e.pedidoEspera)}}const q=[{path:"",component:(()=>{class t{constructor(e){this.serviceUsuario=e,this.pago=!1,this.espera=!1,this.pedidos=[],this.pedidoEspera=!1,this.outprint=!1}ngOnInit(){this.sacarUsuario()}mostrarTipoPago(){this.pago=!0}ocultarTipoPago(){this.pago=!1}sacarUsuario(){this.serviceUsuario.buscarUsuario().subscribe({next:e=>{this.usuario=e,this.espera=!0,this.sacarPedidos()},error:e=>{l().fire("Usuario indispuesto",e.error.mensaje)}})}sacarPedidos(){this.serviceUsuario.buscarPedidos().subscribe({next:e=>{this.pedidos=e,this.sacarOrdenadores()},error:e=>{}})}sacarOrdenadores(){let e=0;this.pedidos.forEach(n=>{this.serviceUsuario.buscarOrdenador(n.id).subscribe({next:d=>{this.pedidos[e].ordenador=d,e++,e==this.pedidos.length&&(this.pedidoEspera=!0)},error:d=>{l().fire("No tiene ordenadores asociados a un pedido",d.error.mensaje)}})})}borrarPedido(e){this.serviceUsuario.borrarPedido(`${e}`).subscribe({next:n=>{this.sacarUsuario()},error:n=>{l().fire("No tiene pedidos",n.error.mensaje)}})}onMensajeHijo(e){this.mensajeHijo=e,this.outprint=1!=this.outprint}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Z.i))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-datos-usuario"]],decls:3,vars:2,consts:[[3,"texto",4,"ngIf"],["class","row gx-0",4,"ngIf"],[3,"texto"],[1,"row","gx-0"],[1,"col-6"],[1,"col-lg-12","h1"],[1,"col-lg-12"],[4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],[3,"eventoHijo"],["class","card div1 col-6",4,"ngIf"],[1,"col-12","h1"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[1,"btn","btn-secondary",3,"click"],[1,"card","div1","col-6"],[1,"col-7"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[4,"ngFor","ngForOf"],[1,"col-2"],["alt","imagen de ordenador",1,"card-img-top",3,"src"],[1,"btn","btn-danger",3,"routerLink","click"],[1,"btn","btn-primary",3,"routerLink"]],template:function(e,n){1&e&&(o.YNc(0,a,1,1,"app-loading",0),o.TgZ(1,"div"),o.YNc(2,H,29,11,"div",1),o.qZA()),2&e&&(o.Q6J("ngIf",!n.espera),o.xp6(2),o.Q6J("ngIf",n.espera))},directives:[u.O5,s.N,c,u.sg,g.rH],styles:[""]}),t})()},{path:"pedidos",loadChildren:()=>r.e(461).then(r.bind(r,4461)).then(t=>t.PedidosModule)}];let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[g.Bz.forChild(q)],g.Bz]}),t})();var M=r(8920);let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[u.ez,D,M.OrdenadoresModule]]}),t})()},7423:(f,m,r)=>{r.r(m),r.d(m,{PaginasProtegidasModule:()=>c});var u=r(6019),g=r(2979),p=r(3556);const l=[{path:"datosUsuario",loadChildren:()=>Promise.resolve().then(r.bind(r,8662)).then(a=>a.DatosUsuarioModule)},{path:"datos-compra",loadChildren:()=>r.e(635).then(r.bind(r,4635)).then(a=>a.FormularioCompraModule)}];let o=(()=>{class a{}return a.\u0275fac=function(U){return new(U||a)},a.\u0275mod=p.oAB({type:a}),a.\u0275inj=p.cJS({imports:[[g.Bz.forChild(l)],g.Bz]}),a})();var Z=r(8662),s=r(5466);let c=(()=>{class a{}return a.\u0275fac=function(U){return new(U||a)},a.\u0275mod=p.oAB({type:a}),a.\u0275inj=p.cJS({providers:[s.z],imports:[[u.ez,o,Z.DatosUsuarioModule]]}),a})()},5515:(f,m,r)=>{r.d(m,{i:()=>l});var u=r(4522),g=r(8260),p=r(3556);let l=(()=>{class o{constructor(s){this.http=s,this.baseUrl=g.N.baseUrl}buscarUsuario(){const s=`${this.baseUrl}/usuario`,c=(new u.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(s,{headers:c})}buscarPedidos(){const s=`${this.baseUrl}/pedido`,c=(new u.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(s,{headers:c})}borrarPedido(s){const c=`${this.baseUrl}/pedido/${s}`,a=(new u.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.delete(c,{headers:a})}buscarOrdenador(s){const c=`${this.baseUrl}/pedido/${s}/ordenadornuevo`,a=(new u.WM).set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(c,{headers:a})}}return o.\u0275fac=function(s){return new(s||o)(p.LFG(u.eN))},o.\u0275prov=p.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);